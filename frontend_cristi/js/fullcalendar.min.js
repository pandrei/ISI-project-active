/*!
 * FullCalendar-Resourceviews v1.6.1.5
 * Docs & License: http://arshaw.com/fullcalendar/, http://tux.fi/~jarnok/fullcalendar-resourceviews
 * (c) 2013 Adam Shaw, 2013 Jarno Kurlin (Resource Views)
 */
(function(e,t){function n(t){e.extend(!0,kt,t)}function r(n,r,l){function f(e){at?(x(),S(),F(),w(e)):d()}function d(){ot=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),at=e("<div class='fc-content' style='position:relative'/>").prependTo(n),nt=new a(K,r),rt=nt.render(),rt&&n.prepend(rt),D(r.defaultView),e(window).resize(E),y()||v()}function v(){setTimeout(function(){!it.start&&y()&&w()},0)}function g(){e(window).unbind("resize",E),nt.destroy(),at.remove(),n.removeClass("fc fc-rtl ui-widget")}function p(){return 0!==dt.offsetWidth}function y(){return 0!==e("body")[0].offsetWidth}function D(t){if(!it||t!=it.name){gt++,L();var n,r=it;r?((r.beforeHide||P)(),j(at,at.height()),r.element.hide()):j(at,1),at.css("overflow","hidden"),it=vt[t],it?it.element.show():it=vt[t]=new Rt[t](n=lt=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(at),K),r&&nt.deactivateButton(r.name),nt.activateButton(t),w(),at.css("overflow",""),r&&j(at,1),n||(it.afterShow||P)(),gt--}}function w(e){if(p()){gt++,L(),ct===t&&x();var r=!1;!it.start||e||it.start>pt||pt>=it.end?(it.render(pt,e||0),k(!0),r=!0):it.sizeDirty?(it.clearEvents(),k(),r=!0):it.eventsDirty&&(it.clearEvents(),r=!0),it.sizeDirty=!1,it.eventsDirty=!1,T(r),st=n.outerWidth(),nt.updateTitle(it.title);var a=new Date;a>=it.start&&it.end>a?nt.disableButton("today"):nt.enableButton("today"),gt--,it.trigger("viewDisplay",dt)}}function b(){S(),p()&&(x(),k(),L(),it.clearEvents(),it.renderEvents(yt),it.sizeDirty=!1)}function S(){e.each(vt,function(e,t){t.sizeDirty=!0})}function x(){ct=r.contentHeight?r.contentHeight:r.height?r.height-(rt?rt.height():0)-B(at):Math.round(at.width()/Math.max(r.aspectRatio,.5))}function k(e){gt++,it.setHeight(ct,e),lt&&(lt.css("position","relative"),lt=null),it.setWidth(at.width(),e),gt--}function E(){if(!gt)if(it.start){var e=++ht;setTimeout(function(){e==ht&&!gt&&p()&&st!=(st=n.outerWidth())&&(gt++,b(),it.trigger("windowResize",dt),gt--)},200)}else v()}function T(e){!r.lazyFetching||et(it.visStart,it.visEnd)?(R(),r.refetchResources&&N()):e&&W()}function R(){tt(it.visStart,it.visEnd)}function N(){ft(!1,it),vt=[],it.element.remove(),it=vt[it.name]=new Rt[it.name](lt=e("<div class='fc-view fc-view-"+it.name+"' style='position:absolute'/>").appendTo(at),K),w()}function z(e){yt=e,W()}function H(e){W(e)}function W(e){F(),p()&&(it.clearEvents(),it.renderEvents(yt,e),it.eventsDirty=!1)}function F(){e.each(vt,function(e,t){t.eventsDirty=!0})}function A(e,n,r){it.select(e,n,r===t?!0:r)}function L(){it&&it.unselect()}function O(){w(-1)}function _(){w(1)}function q(){w(-100)}function I(){w(100)}function Y(){s(pt,-1),w()}function V(){s(pt,1),w()}function J(){pt=new Date,w()}function X(e,t,n){e instanceof Date?pt=h(e):m(pt,e,t,n),w()}function U(e,n,r){e!==t&&s(pt,e),n!==t&&c(pt,n),r!==t&&u(pt,r),w()}function Z(){return h(pt)}function $(){return it}function Q(e,n){return n===t?r[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(r[e]=n,b()),t)}function G(e,n){return r[e]?r[e].apply(n||dt,Array.prototype.slice.call(arguments,2)):t}var K=this;K.options=r,K.render=f,K.destroy=g,K.refetchEvents=R,K.reportEvents=z,K.refetchResources=N,K.reportEventChange=H,K.rerenderEvents=W,K.changeView=D,K.select=A,K.unselect=L,K.prev=O,K.next=_,K.largePrev=q,K.largeNext=I,K.prevYear=Y,K.nextYear=V,K.today=J,K.gotoDate=X,K.incrementDate=U,K.formatDate=function(e,t){return M(e,t,r)},K.formatDates=function(e,t,n){return C(e,t,n,r)},K.getDate=Z,K.getView=$,K.option=Q,K.trigger=G,o.call(K,r,l);var et=K.isFetchNeeded,tt=K.fetchEvents;i.call(K,r);var nt,rt,at,ot,it,st,ct,lt,ut,ft=K.fetchResources,dt=n[0],vt={},ht=0,gt=0,pt=new Date,yt=[];m(pt,r.year,r.month,r.date),r.droppable&&e(document).bind("dragstart",function(t,n){var a=t.target,o=e(a);if(!o.parents(".fc").length){var i=r.dropAccept;(e.isFunction(i)?i.call(a,o):o.is(i))&&(ut=a,it.dragStart(ut,t,n))}}).bind("dragstop",function(e,t){ut&&(it.dragStop(ut,e,t),ut=null)})}function a(n,r){function a(){v=r.theme?"ui":"fc";var n=r.header;return n?h=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(i("left")).append(i("center")).append(i("right"))):t}function o(){h.remove()}function i(t){var a=e("<td class='fc-header-"+t+"'/>"),o=r.header[t];return o&&e.each(o.split(" "),function(t){t>0&&a.append("<span class='fc-header-space'/>");var o;e.each(this.split(","),function(t,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(v+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:Rt[i]&&(s=function(){u.removeClass(v+"-state-hover"),n.changeView(i)}),s){var c=r.theme?X(r.buttonIcons,i):null,l=X(r.buttonText,i),u=e("<span class='fc-button fc-button-"+i+" "+v+"-state-default'>"+(c?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+c+"'/>"+"</span>":l)+"</span>").click(function(){u.hasClass(v+"-state-disabled")||s()}).mousedown(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-down")}).mouseup(function(){u.removeClass(v+"-state-down")}).hover(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-hover")},function(){u.removeClass(v+"-state-hover").removeClass(v+"-state-down")}).appendTo(a);$(u),o||u.addClass(v+"-corner-left"),o=u}}}),o&&o.addClass(v+"-corner-right")}),a}function s(e){h.find("h2").html(e)}function c(e){h.find("span.fc-button-"+e).addClass(v+"-state-active")}function l(e){h.find("span.fc-button-"+e).removeClass(v+"-state-active")}function u(e){h.find("span.fc-button-"+e).addClass(v+"-state-disabled")}function f(e){h.find("span.fc-button-"+e).removeClass(v+"-state-disabled")}var d=this;d.render=a,d.destroy=o,d.updateTitle=s,d.activateButton=c,d.deactivateButton=l,d.disableButton=u,d.enableButton=f;var v,h=e([])}function o(n,r){function a(e,t){return!S||S>e||t>x}function o(e,t){S=e,x=t,F=[];var n=++z,r=N.length;H=r;for(var a=0;r>a;a++)i(N[a],n)}function i(t,r){s(t,function(a){if(r==z){if(a){n.eventDataTransform&&(a=e.map(a,n.eventDataTransform)),t.eventDataTransform&&(a=e.map(a,t.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=t,m(a[o]);F=F.concat(a)}H--,H||T(F)}})}function s(r,a){var o,i,c=Tt.sourceFetchers;for(o=0;c.length>o;o++){if(i=c[o](r,S,x,a),i===!0)return;if("object"==typeof i)return s(i,a),t}var l=r.events;if(l)e.isFunction(l)?(p(),l(h(S),h(x),function(e){a(e),y()})):e.isArray(l)?a(l):a();else{var u=r.url;if(u){var f=r.success,d=r.error,v=r.complete,g=e.extend({},r.data||{}),m=tt(r.startParam,n.startParam),D=tt(r.endParam,n.endParam);m&&(g[m]=Math.round(+S/1e3)),D&&(g[D]=Math.round(+x/1e3)),p(),e.ajax(e.extend({},Nt,r,{data:g,success:function(t){t=t||[];var n=et(f,this,arguments);e.isArray(n)&&(t=n),a(t)},error:function(){et(d,this,arguments),a()},complete:function(){et(v,this,arguments),y()}}))}else a()}}function c(e){e=l(e),e&&(H++,i(e,z))}function l(n){return e.isFunction(n)||e.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(w(n),N.push(n),n):t}function u(t){N=e.grep(N,function(e){return!b(e,t)}),F=e.grep(F,function(e){return!b(e.source,t)}),T(F)}function f(e){var t,n,r=F.length,a=E().defaultEventEnd,o=e.start-e._start,i=e.end?e.end-(e._end||a(e)):0;for(t=0;r>t;t++)n=F[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+o),n.end=e.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroudColor=e.backgroudColor,n.borderColor=e.borderColor,n.textColor=e.textColor,m(n));m(e),T(F)}function d(e,t){m(e),e.source||(t&&(R.events.push(e),e.source=R),F.push(e)),T(F)}function v(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}F=e.grep(F,t,!0);for(var r=0;N.length>r;r++)e.isArray(N[r].events)&&(N[r].events=e.grep(N[r].events,t,!0))}else{F=[];for(var r=0;N.length>r;r++)e.isArray(N[r].events)&&(N[r].events=[])}T(F)}function g(t){return e.isFunction(t)?e.grep(F,t):t?(t+="",e.grep(F,function(e){return e._id==t})):F}function p(){W++||k("loading",null,!0)}function y(){--W||k("loading",null,!1)}function m(e){var r=e.source||{},a=tt(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+zt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=D(e.start,a)),e.end=D(e.end,a),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=tt(r.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function w(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Tt.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}function b(e,t){return e&&t&&M(e)==M(t)}function M(e){return("object"==typeof e?e.events||e.url:"")||e}var C=this;C.isFetchNeeded=a,C.fetchEvents=o,C.addEventSource=c,C.removeEventSource=u,C.updateEvent=f,C.renderEvent=d,C.removeEvents=v,C.clientEvents=g,C.normalizeEvent=m;for(var S,x,k=C.trigger,E=C.getView,T=C.reportEvents,R={events:[]},N=[R],z=0,H=0,W=0,F=[],A=0;r.length>A;A++)l(r[A])}function i(n){function r(t){var n={};if(e.isFunction(t))n={resources:t},l.push(n);else if("string"==typeof t)n={url:t},l.push(n);else if("object"==typeof t)for(var r=0;t.length>r;r++){var a=t[r];i(a),n={resources:a},l.push(n)}}function a(e,n){if(e=e!==t?e:!0,c!=t&&e)return c;c=[];for(var r=l.length,a=0;r>a;a++){var i=o(l[a],n);c=c.concat(i)}return c}function o(t,r){var a=t.resources;if(a){if(e.isFunction(a))return a()}else{var o=t.url;if(o){var i={};if("object"==typeof r){var s=n.startParam,c=n.endParam;s&&(i[s]=Math.round(+r.visStart/1e3)),c&&(i[c]=Math.round(+r.visEnd/1e3))}e.ajax(e.extend({},t,{data:i,dataType:"json",cache:!1,success:function(e){e=e||[],a=e},error:function(){alert("ajax error getting json from "+o)},async:!1}))}}return a}function i(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Tt.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}var s=this;s.fetchResources=a;var c,l=[];r(n.resources)}function s(e,t,n){return e.setFullYear(e.getFullYear()+t),n||v(e),e}function c(e,t,n){if(+e){var r=e.getMonth()+t,a=h(e);for(a.setDate(1),a.setMonth(r),e.setMonth(r),n||v(e);e.getMonth()!=a.getMonth();)e.setDate(e.getDate()+(a>e?1:-1))}return e}function l(e,t,n){return u(e,7*t,n),e}function u(e,t,n){if(+e){var r=e.getDate()+t,a=h(e);a.setHours(9),a.setDate(r),e.setDate(r),n||v(e),f(e,a)}return e}function f(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Ft)}function d(e,t){return e.setMinutes(e.getMinutes()+t),e}function v(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?v(new Date(+e)):new Date(+e)}function g(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function p(e,t,n){for(t=t||1;!e.getDay()||n&&1==e.getDay()||!n&&6==e.getDay();)u(e,t);return e}function y(e,t){return Math.round((h(e,!0)-h(t,!0))/Wt)}function m(e,n,r,a){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),a!==t&&e.setDate(a)}function D(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),w(e,n)||(e?new Date(e):null)):null}function w(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(t||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),f(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),f(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function b(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function M(e,t,n){return C(e,null,t,n)}function C(e,t,n,r){r=r||kt;var a,o,i,s,c=e,l=t,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){c&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var d=M(c,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=M(c,v,r);d!=M(l,v,r)&&(f+=d),a=i;break}}else if("{"==o)c=t,l=e;else if("}"==o)c=e,l=t;else{for(i=u;i>a;i--)if(s=Lt[n.substring(a,i)]){c&&(f+=s(c,r)),a=i-1;break}i==a&&c&&(f+=o)}return f}function S(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function x(e){return e.end?k(e.end,e.allDay):u(h(e.start),1)}function k(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?u(e,1):v(e)}function E(e,t){return 100*(t.msLength-e.msLength)+(e.event.start-t.event.start)}function T(e,t){return e.end>t.start&&e.start<t.end}function R(e,t,n,r){var a,o,i,s,c,l,u,f,d=[],v=e.length;for(a=0;v>a;a++)o=e[a],i=o.start,s=t[a],s>n&&r>i&&(n>i?(c=h(n),u=!1):(c=i,u=!0),s>r?(l=h(r),f=!1):(l=s,f=!0),d.push({event:o,start:c,end:l,isStart:u,isEnd:f,msLength:l-c}));return d.sort(E)}function N(e){var t,n,r,a,o,i=[],s=e.length;for(t=0;s>t;t++){for(n=e[t],r=0;;){if(a=!1,i[r])for(o=0;i[r].length>o;o++)if(T(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function z(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,c=n.target;c!=this;)o=c,c=c.parentNode;(i=o._fci)!==t&&(o._fci=t,s=r[i],a(s.event,s.element,s),e(n.target).trigger(n)),n.stopPropagation()})}function H(t,n,r){for(var a,o=0;t.length>o;o++)a=e(t[o]),a.width(Math.max(0,n-F(a,r)))}function W(t,n,r){for(var a,o=0;t.length>o;o++)a=e(t[o]),a.height(Math.max(0,n-B(a,r)))}function F(e,t){return A(e)+O(e)+(t?L(e):0)}function A(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function L(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function O(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function B(e,t){return _(e)+I(e)+(t?q(e):0)}function _(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function q(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function I(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function j(e,t){t="number"==typeof t?t+"px":t,e.each(function(e,n){n.style.cssText+=";min-height:"+t+";_height:"+t})}function P(){}function Y(e,t){return e-t}function V(e){return Math.max.apply(Math,e)}function J(e){return(10>e?"0":"")+e}function X(e,n){if(e[n]!==t)return e[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=e[a[o].toLowerCase()],r!==t)return r;return e[""]}function U(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Z(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function $(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Q(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function G(e,t){e.each(function(e,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+Ht[t.getDay()])})}function K(e,t){var n=e.source||{},r=e.color,a=n.color,o=t("eventColor"),i=e.backgroundColor||r||n.backgroundColor||a||t("eventBackgroundColor")||o,s=e.borderColor||r||n.borderColor||a||t("eventBorderColor")||o,c=e.textColor||n.textColor||t("eventTextColor"),l=[];return i&&l.push("background-color:"+i),s&&l.push("border-color:"+s),c&&l.push("color:"+c),l.join(";")}function et(t,n,r){if(e.isFunction(t)&&(t=[t]),t){var a,o;for(a=0;t.length>a;a++)o=t[a].apply(n,r)||o;return o}}function tt(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function nt(e,t){function n(e,t){t&&(c(e,t),e.setDate(1));var n=h(e,!0);n.setDate(1);var s=c(h(n),1),l=h(n),f=h(s),d=a("firstDay"),v=a("weekends")?0:1;v&&(p(l),p(f,-1,!0)),u(l,-((l.getDay()-Math.max(d,v)+7)%7)),u(f,(7-f.getDay()+Math.max(d,v))%7);var g=Math.round((f-l)/(7*Wt));"fixed"==a("weekMode")&&(u(f,7*(6-g)),g=6),r.title=i(n,a("titleFormat")),r.start=n,r.end=s,r.visStart=l,r.visEnd=f,o(g,v?5:7,!0)}var r=this;r.render=n,ot.call(r,e,t,"month");var a=r.opt,o=r.renderBasic,i=t.formatDate}function rt(e,t){function n(e,t){t&&u(e,7*t);var n=u(h(e),-((e.getDay()-a("firstDay")+7)%7)),s=u(h(n),7),c=h(n),l=h(s),f=a("weekends");f||(p(c),p(l,-1,!0)),r.title=i(c,u(h(l),-1),a("titleFormat")),r.start=n,r.end=s,r.visStart=c,r.visEnd=l,o(1,f?7:5,!1)}var r=this;r.render=n,ot.call(r,e,t,"basicWeek");var a=r.opt,o=r.renderBasic,i=t.formatDates}function at(e,t){function n(e,t){t&&(u(e,t),a("weekends")||p(e,0>t?-1:1)),r.title=i(e,a("titleFormat")),r.start=r.visStart=h(e,!0),r.end=r.visEnd=u(h(r.start),1),o(1,1,!1)}var r=this;r.render=n,ot.call(r,e,t,"basicDay");var a=r.opt,o=r.renderBasic,i=t.formatDate}function ot(t,n,r){function a(e,t,n){nt=e,rt=t,o();var r=!Y;r?i():kt(),s(n)}function o(){ct=Dt("isRTL"),ct?(lt=-1,ut=rt-1):(lt=1,ut=0),ft=Dt("firstDay"),dt=Dt("weekends")?0:1,vt=Dt("theme")?"ui":"fc",ht=Dt("columnFormat"),gt=Dt("weekNumbers"),pt=Dt("weekNumberTitle"),yt="iso"!=Dt("weekNumberCalculation")?"w":"W"}function i(){Z=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function s(n){var r,a,o,i,s="",c=vt+"-widget-header",l=vt+"-widget-content",u=_.start.getMonth(),d=v(new Date);for(s+="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",gt&&(s+="<th class='fc-week-number "+c+"'/>"),r=0;rt>r;r++)o=N(0,r),s+="<th class='fc-day-header fc-"+Ht[o.getDay()]+" "+c+"'/>";for(s+="</tr></thead><tbody>",r=0;nt>r;r++){for(s+="<tr class='fc-week'>",gt&&(s+="<td class='fc-week-number "+l+"'>"+"<div/>"+"</td>"),a=0;rt>a;a++)o=N(r,a),i=["fc-day","fc-"+Ht[o.getDay()],l],o.getMonth()!=u&&i.push("fc-other-month"),+o==+d&&(i.push("fc-today"),i.push(vt+"-state-highlight")),s+="<td class='"+i.join(" ")+"'"+" data-date='"+Nt(o,"yyyy-MM-dd")+"'"+">"+"<div>",n&&(s+="<div class='fc-day-number'>"+o.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";s+="</tr>"}s+="</tbody></table>",L(),q&&q.remove(),q=e(s).appendTo(t),I=q.find("thead"),P=I.find(".fc-day-header"),Y=q.find("tbody"),V=Y.find("tr"),J=Y.find(".fc-day"),X=V.find("td:first-child"),U=V.eq(0).find(".fc-day-content > div"),Q(I.add(I.find("tr"))),Q(V),V.eq(0).addClass("fc-first"),V.filter(":last").addClass("fc-last"),gt&&I.find(".fc-week-number").text(pt),P.each(function(t,n){var r=z(t);e(n).text(Nt(r,ht))}),gt&&Y.find(".fc-week-number > div").each(function(t,n){var r=N(t,0);e(n).text(Nt(r,yt))}),J.each(function(t,n){var r=z(t);St("dayRender",_,r,e(n))}),f(J)}function c(t){K=t;var n,r,a,o=K-I.height();"variable"==Dt("weekMode")?n=r=Math.floor(o/(1==nt?2:6)):(n=Math.floor(o/nt),r=o-n*(nt-1)),X.each(function(t,o){nt>t&&(a=e(o),j(a.find("> div"),(t==nt-1?r:n)-B(a)))}),O()}function l(e){G=e,st.clear(),tt=0,gt&&(tt=I.find("th.fc-week-number").outerWidth()),et=Math.floor((G-tt)/rt),H(P.slice(0,-1),et)}function f(e){e.click(d).mousedown(Rt)}function d(t){if(!Dt("selectable")){var n=w(e(this).data("date"));St("dayClick",this,n,!0,t)}}function g(e,t,n){n&&at.build();for(var r=h(_.visStart),a=u(h(r),rt),o=0;nt>o;o++){var i=new Date(Math.max(r,e)),s=new Date(Math.min(a,t));if(s>i){var c,l;ct?(c=y(s,r)*lt+ut+1,l=y(i,r)*lt+ut+1):(c=y(i,r),l=y(s,r)),f(p(o,c,o,l-1))}u(r,7),u(a,7)}}function p(e,n,r,a){var o=at.rect(e,n,r,a,t);return Et(o,t)}function m(e){return h(e)}function D(e,t){g(e,u(h(t),1),!0)}function b(){Tt()}function M(e,t,n){var r=T(e),a=J[r.row*rt+r.col];St("dayClick",a,e,t,n)}function C(e,t){ot.start(function(e){Tt(),e&&p(e.row,e.col,e.row,e.col)},t)}function S(e,t,n){var r=ot.stop();if(Tt(),r){var a=R(r);St("drop",e,a,!0,t,n)}}function x(e){return h(e.start)}function k(e){return st.left(e)}function E(e){return st.right(e)}function T(e){return{row:Math.floor(y(e,_.visStart)/7),col:W(e.getDay())}}function R(e){return N(e.row,e.col)}function N(e,t){return u(h(_.visStart),7*e+t*lt+ut)}function z(e){return N(Math.floor(e/rt),e%rt)}function W(e){return(e-Math.max(ft,dt)+rt)%rt*lt+ut}function F(e){return V.eq(e)}function A(){var e=0;return gt&&(e+=tt),{left:e,right:G}}function L(){j(t,t.height())}function O(){j(t,1)}var _=this;_.renderBasic=a,_.setHeight=c,_.setWidth=l,_.renderDayOverlay=g,_.defaultSelectionEnd=m,_.renderSelection=D,_.clearSelection=b,_.reportDayClick=M,_.dragStart=C,_.dragStop=S,_.defaultEventEnd=x,_.getHoverListener=function(){return ot},_.colContentLeft=k,_.colContentRight=E,_.dayOfWeekCol=W,_.dateCell=T,_.cellDate=R,_.cellIsAllDay=function(){return!0},_.allDayRow=F,_.allDayBounds=A,_.getRowCnt=function(){return nt},_.getColCnt=function(){return rt},_.getColWidth=function(){return et},_.getViewName=function(){return r},_.getDaySegmentContainer=function(){return Z},mt.call(_,t,n,r),bt.call(_),wt.call(_),it.call(_);var q,I,P,Y,V,J,X,U,Z,G,K,et,tt,nt,rt,at,ot,st,ct,lt,ut,ft,dt,vt,ht,gt,pt,yt,Dt=_.opt,St=_.trigger,kt=_.clearEvents,Et=_.renderOverlay,Tt=_.clearOverlays,Rt=_.daySelectionMousedown,Nt=n.formatDate;$(t.addClass("fc-grid")),at=new Mt(function(t,n){var r,a,o;P.each(function(t,i){r=e(i),a=r.offset().left,t&&(o[1]=a),o=[a],n[t]=o}),o[1]=a+r.outerWidth(),V.each(function(n,i){nt>n&&(r=e(i),a=r.offset().top,n&&(o[1]=a),o=[a],t[n]=o)}),o[1]=a+r.outerHeight()}),ot=new Ct(at),st=new xt(function(e){return U.eq(e)})}function it(){function t(e,t){d(e),k(r(e),t),c("eventAfterAllRender")}function n(){v(),D().empty()}function r(t){var n,r,a,o,s,c,l=C(),f=S(),d=h(i.visStart),v=u(h(d),f),g=e.map(t,x),p=[];for(n=0;l>n;n++){for(r=N(R(t,g,d,v)),a=0;r.length>a;a++)for(o=r[a],s=0;o.length>s;s++)c=o[s],c.row=n,c.level=a,p.push(c);u(d,7),u(v,7)}return p}function a(e,t,n){l(e)&&o(e,t),n.isEnd&&f(e)&&E(e,t,n),g(e,t)}function o(e,t){var n,r=w();t.draggable({zIndex:9,delay:50,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(a,o){c("eventDragStart",t,e,a,o),y(e,t),r.start(function(r,a,o,i){t.draggable("option","revert",!r||!o&&!i),M(),r?(n=7*o+i*(s("isRTL")?-1:1),b(u(h(e.start),n),u(x(e),n))):n=0},a,"drag")},stop:function(a,o){r.stop(),M(),c("eventDragStop",t,e,a,o),n?m(this,e,n,0,e.allDay,a,o):(t.css("filter",""),p(e,t))}})}var i=this;i.renderEvents=t,i.compileDaySegs=r,i.clearEvents=n,i.bindDaySeg=a,Dt.call(i);var s=i.opt,c=i.trigger,l=i.isEventDraggable,f=i.isEventResizable,d=i.reportEvents,v=i.reportEventClear,g=i.eventElementHandlers,p=i.showEvents,y=i.hideEvents,m=i.eventDrop,D=i.getDaySegmentContainer,w=i.getHoverListener,b=i.renderDayOverlay,M=i.clearOverlays,C=i.getRowCnt,S=i.getColCnt,k=i.renderDaySegs,E=i.resizableDayEvent}function st(e,t){function n(e,t){t&&u(e,7*t);var n=u(h(e),-((e.getDay()-a("firstDay")+7)%7)),s=u(h(n),7),c=h(n),l=h(s),f=a("weekends");f||(p(c),p(l,-1,!0)),r.title=i(c,u(h(l),-1),a("titleFormat")),r.start=n,r.end=s,r.visStart=c,r.visEnd=l,o(f?7:5)}var r=this;r.render=n,lt.call(r,e,t,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=t.formatDates}function ct(e,t){function n(e,t){t&&(u(e,t),a("weekends")||p(e,0>t?-1:1));var n=h(e,!0),s=u(h(n),1);r.title=i(e,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=s,o(1)}var r=this;r.render=n,lt.call(r,e,t,"agendaDay");var a=r.opt,o=r.renderAgenda,i=t.formatDate}function lt(n,r,a){function o(e){Lt=e,i(),et?nn():s(),c()}function i(){jt=en("theme")?"ui":"fc",Yt=en("weekends")?0:1,Pt=en("firstDay"),(Vt=en("isRTL"))?(Jt=-1,Xt=Lt-1):(Jt=1,Xt=0),Ut=b(en("minTime")),Zt=b(en("maxTime")),$t=en("columnFormat"),Qt=en("weekNumbers"),Gt=en("weekNumberTitle"),Kt="iso"!=en("weekNumberCalculation")?"w":"W",Wt=en("snapMinutes")||en("slotMinutes")}function s(){var t,r,a,o,i,s=jt+"-widget-header",c=jt+"-widget-content",l=0==en("slotMinutes")%15;for(t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>",t+=Qt?"<th class='fc-agenda-axis fc-week-number "+s+"'/>":"<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Lt>r;r++)t+="<th class='fc- fc-col"+r+" "+s+"'/>";for(t+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Lt>r;r++)t+="<td class='fc- fc-col"+r+" "+c+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(t+="<td class='fc-agenda-gutter "+c+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",et=e(t).appendTo(n),tt=et.find("thead"),nt=tt.find("th").slice(1,-1),rt=et.find("tbody"),at=rt.find("td").slice(0,-1),ot=at.find("div.fc-day-content div"),it=at.eq(0),st=it.find("> div"),Q(tt.add(tt.find("tr"))),Q(rt.add(rt.find("tr"))),Dt=tt.find("th:first"),St=et.find(".fc-agenda-gutter"),ct=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),en("allDaySlot")?(lt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ct),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+en("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ft=e(t).appendTo(ct),dt=ft.find("tr"),w(dt.find("td")),Dt=Dt.add(ft.find("th:first")),St=St.add(ft.find("th.fc-agenda-gutter")),ct.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):lt=e([]),vt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ct),ht=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(vt),gt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ht),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=g(),o=d(h(a),Zt),d(a,Ut),Ot=0,r=0;o>a;r++)i=a.getMinutes(),t+="<tr class='fc-slot"+r+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(l&&i?"&nbsp;":un(a,en("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",d(a,en("slotMinutes")),Ot++;t+="</tbody></table>",pt=e(t).appendTo(ht),yt=pt.find("div:first"),M(pt.find("td")),Dt=Dt.add(pt.find("th:first"))}function c(){var e,t,n,r,a=v(new Date);if(Qt){var o=un(z(0),Kt);Vt?o+=Gt:o=Gt+o,tt.find(".fc-week-number").text(o)}for(e=0;Lt>e;e++)r=z(e),t=nt.eq(e),t.html(un(r,$t)),n=at.eq(e),+r==+a?n.addClass(jt+"-state-highlight fc-today"):n.removeClass(jt+"-state-highlight fc-today"),G(t.add(n),r)}function l(e,n){e===t&&(e=Tt),Tt=e,fn={};var r=rt.position().top,a=vt.position().top,o=Math.min(e-r,pt.height()+a+1);st.height(o-B(it)),ct.css("top",r),vt.height(o-a-1),Ht=yt.height()+1,Ft=en("slotMinutes")/Wt,At=Ht/Ft,n&&p()}function f(t){Et=t,qt.clear(),Rt=0,H(Dt.width("").each(function(t,n){Rt=Math.max(Rt,e(n).outerWidth())}),Rt);var n=vt[0].clientWidth;zt=vt.width()-n,zt?(H(St,zt),St.show().prev().removeClass("fc-last")):St.hide().prev().addClass("fc-last"),Nt=Math.floor((n-Rt)/Lt),H(nt.slice(0,-1),Nt)}function p(){function e(){vt.scrollTop(r)}var t=g(),n=h(t);n.setHours(en("firstHour"));var r=L(t,n)+1;e(),setTimeout(e,0)}function m(){It=vt.scrollTop()}function D(){vt.scrollTop(It)}function w(e){e.click(C).mousedown(cn)}function M(e){e.click(C).mousedown(J)}function C(e){if(!en("selectable")){var t=Math.min(Lt-1,Math.floor((e.pageX-et.offset().left-Rt)/Nt)),n=z(t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*en("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Ut),tn("dayClick",at[t],n,!1,e)}else tn("dayClick",at[t],n,!0,e)}}function S(e,t,n){n&&Bt.build();var r,a,o=h(K.visStart);Vt?(r=y(t,o)*Jt+Xt+1,a=y(e,o)*Jt+Xt+1):(r=y(e,o),a=y(t,o)),r=Math.max(0,r),a=Math.min(Lt,a),a>r&&w(x(0,r,0,a-1))}function x(e,t,n,r){var a=Bt.rect(e,t,n,r,ct);return rn(a,ct)}function k(e,t){for(var n=h(K.visStart),r=u(h(n),1),a=0;Lt>a;a++){var o=new Date(Math.max(n,e)),i=new Date(Math.min(r,t));if(i>o){var s=a*Jt+Xt,c=Bt.rect(0,s,0,s,ht),l=L(n,o),f=L(n,i);c.top=l,c.height=f-l,M(rn(c,ht))}u(n,1),u(r,1)}}function E(e){return qt.left(e)}function T(e){return qt.right(e)}function R(e){return{row:Math.floor(y(e,K.visStart)/7),col:A(e.getDay())}}function N(e){var t=z(e.col),n=e.row;return en("allDaySlot")&&n--,n>=0&&d(t,Ut+n*Wt),t}function z(e){return u(h(K.visStart),e*Jt+Xt)}function F(e){return en("allDaySlot")&&!e.row}function A(e){return(e-Math.max(Pt,Yt)+Lt)%Lt*Jt+Xt}function L(e,n){if(e=h(e,!0),d(h(e),Ut)>n)return 0;if(n>=d(h(e),Zt))return pt.height();var r=en("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Ut,o=Math.floor(a/r),i=fn[o];return i===t&&(i=fn[o]=pt.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+Ht*(a%r/r)))}function O(){return{left:Rt,right:Et-zt}}function _(){return dt}function q(e){var t=h(e.start);return e.allDay?t:d(t,en("defaultEventMinutes"))}function I(e,t){return t?h(e):d(h(e),en("slotMinutes"))}function j(e,t,n){n?en("allDaySlot")&&S(e,u(h(t),1),!0):P(e,t)}function P(t,n){var r=en("selectHelper");if(Bt.build(),r){var a=y(t,K.visStart)*Jt+Xt;if(a>=0&&Lt>a){var o=Bt.rect(0,a,0,a,ht),i=L(t,t),s=L(t,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,e.isFunction(r)){var c=r(t,n);c&&(o.position="absolute",o.zIndex=8,kt=e(c).css(o).appendTo(ht))}else o.isStart=!0,o.isEnd=!0,kt=e(ln({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},o)),kt.css("opacity",en("dragOpacity"));kt&&(M(kt),ht.append(kt),H(kt,o.width,!0),W(kt,o.height,!0))}}}else k(t,n)}function V(){an(),kt&&(kt.remove(),kt=null)}function J(t){if(1==t.which&&en("selectable")){sn(t);var n;_t.start(function(e,t){if(V(),e&&e.col==t.col&&!F(e)){var r=N(t),a=N(e);n=[r,d(h(r),Wt),a,d(h(a),Wt)].sort(Y),P(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){_t.stop(),n&&(+n[0]==+n[1]&&X(n[0],!1,e),on(n[0],n[3],!1,e))})}}function X(e,t,n){tn("dayClick",at[A(e.getDay())],e,t,n)}function U(e,t){_t.start(function(e){if(an(),e)if(F(e))x(e.row,e.col,e.row,e.col);else{var t=N(e),n=d(h(t),en("defaultEventMinutes"));k(t,n)}},t)}function Z(e,t,n){var r=_t.stop();an(),r&&tn("drop",e,N(r),F(r),t,n)}var K=this;K.renderAgenda=o,K.setWidth=f,K.setHeight=l,K.beforeHide=m,K.afterShow=D,K.defaultEventEnd=q,K.timePosition=L,K.dayOfWeekCol=A,K.dateCell=R,K.cellDate=N,K.cellIsAllDay=F,K.allDayRow=_,K.allDayBounds=O,K.getHoverListener=function(){return _t},K.colContentLeft=E,K.colContentRight=T,K.getDaySegmentContainer=function(){return lt},K.getSlotSegmentContainer=function(){return gt},K.getMinMinute=function(){return Ut},K.getMaxMinute=function(){return Zt},K.getBodyContent=function(){return ht},K.getRowCnt=function(){return 1},K.getColCnt=function(){return Lt},K.getColWidth=function(){return Nt},K.getViewName=function(){return a},K.getSnapHeight=function(){return At},K.getSnapMinutes=function(){return Wt},K.defaultSelectionEnd=I,K.renderDayOverlay=S,K.renderSelection=j,K.clearSelection=V,K.reportDayClick=X,K.dragStart=U,K.dragStop=Z,mt.call(K,n,r,a),bt.call(K),wt.call(K),ut.call(K);var et,tt,nt,rt,at,ot,it,st,ct,lt,ft,dt,vt,ht,gt,pt,yt,Dt,St,kt,Et,Tt,Rt,Nt,zt,Ht,Wt,Ft,At,Lt,Ot,Bt,_t,qt,It,jt,Pt,Yt,Vt,Jt,Xt,Ut,Zt,$t,Qt,Gt,Kt,en=K.opt,tn=K.trigger,nn=K.clearEvents,rn=K.renderOverlay,an=K.clearOverlays,on=K.reportSelection,sn=K.unselect,cn=K.daySelectionMousedown,ln=K.slotSegHtml,un=r.formatDate,fn={};
$(n.addClass("fc-agenda")),Bt=new Mt(function(t,n){function r(e){return Math.max(c,Math.min(l,e))}var a,o,i;nt.each(function(t,r){a=e(r),o=a.offset().left,t&&(i[1]=o),i=[o],n[t]=i}),i[1]=o+a.outerWidth(),en("allDaySlot")&&(a=dt,o=a.offset().top,t[0]=[o,o+a.outerHeight()]);for(var s=ht.offset().top,c=vt.offset().top,l=c+vt.outerHeight(),u=0;Ot*Ft>u;u++)t.push([r(s+At*u),r(s+At*(u+1))])}),_t=new Ct(Bt),qt=new xt(function(e){return ot.eq(e)})}function ut(){function n(e,t){C(e);var n,r=e.length,i=[],c=[];for(n=0;r>n;n++)e[n].allDay?i.push(e[n]):c.push(e[n]);m("allDaySlot")&&(j(a(i),t),E()),s(o(c),t),D("eventAfterAllRender")}function r(){S(),T().empty(),H().empty()}function a(t){var n,r,a,o,i=N(R(t,e.map(t,x),y.visStart,y.visEnd)),s=i.length,c=[];for(n=0;s>n;n++)for(r=i[n],a=0;r.length>a;a++)o=r[a],o.row=0,o.level=n,c.push(o);return c}function o(t){var n,r,a,o,s,c,l=Y(),f=O(),v=L(),g=d(h(y.visStart),f),p=e.map(t,i),m=[];for(n=0;l>n;n++){for(r=N(R(t,p,g,d(h(g),v-f))),ft(r),a=0;r.length>a;a++)for(o=r[a],s=0;o.length>s;s++)c=o[s],c.col=n,c.level=a,m.push(c);u(g,1,!0)}return m}function i(e){return e.end?h(e.end):d(h(e.start),m("defaultEventMinutes"))}function s(n,r){var a,o,i,s,l,u,d,v,h,g,p,y,w,b,M,C,S,x,k,E,T,R,N=n.length,W="",A={},L={},O=H(),j=Y();for((E=m("isRTL"))?(T=-1,R=j-1):(T=1,R=0),a=0;N>a;a++)o=n[a],i=o.event,s=_(o.start,o.start),l=_(o.start,o.end),u=o.col,d=o.level,v=o.forward||0,h=q(u*T+R),g=I(u*T+R)-h,g=Math.min(g-6,.95*g),p=d?g/(d+v+1):v?2*(g/(v+1)-6):g,y=h+g/(d+v+1)*d*T+(E?g-p:0),o.top=s,o.left=y,o.outerWidth=p,o.outerHeight=l-s,W+=c(i,o);for(O[0].innerHTML=W,w=O.children(),a=0;N>a;a++)o=n[a],i=o.event,b=e(w[a]),M=D("eventRender",i,i,b),M===!1?b.remove():(M&&M!==!0&&(b.remove(),b=e(M).css({position:"absolute",top:o.top,left:o.left}).appendTo(O)),o.element=b,i._id===r?f(i,b,o):b[0]._fci=a,Q(i,b));for(z(O,n,f),a=0;N>a;a++)o=n[a],(b=o.element)&&(S=A[C=o.key=Z(b[0])],o.vsides=S===t?A[C]=B(b,!0):S,S=L[C],o.hsides=S===t?L[C]=F(b,!0):S,x=b.find(".fc-event-title"),x.length&&(o.contentTop=x[0].offsetTop));for(a=0;N>a;a++)o=n[a],(b=o.element)&&(b[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",k=Math.max(0,o.outerHeight-o.vsides),b[0].style.height=k+"px",i=o.event,o.contentTop!==t&&10>k-o.contentTop&&(b.find("div.fc-event-time").text(it(i.start,m("timeFormat"))+" - "+i.title),b.find("div.fc-event-title").remove()),D("eventAfterRender",i,i,b))}function c(e,t){var n="<",r=e.url,a=K(e,m),o=["fc-event","fc-event-vert"];return w(e)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(e.className),e.source&&(o=o.concat(e.source.className||[])),n+=r?"a href='"+U(e.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+U(st(e.start,e.end,m("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+U(e.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&b(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function l(e,t,n){w(e)&&v(e,t,n.isStart),n.isEnd&&b(e)&&P(e,t,n),k(e,t)}function f(e,t,n){var r=t.find("div.fc-event-time");w(e)&&g(e,t,r),n.isEnd&&b(e)&&p(e,t,r),k(e,t)}function v(e,t,n){function r(){s||(t.width(a).height("").draggable("option","grid",null),s=!0)}var a,o,i,s=!0,c=m("isRTL")?-1:1,l=A(),f=V(),d=J(),v=X(),g=O();t.draggable({zIndex:9,opacity:m("dragOpacity","month"),revertDuration:m("dragRevertDuration"),start:function(g,p){D("eventDragStart",t,e,g,p),et(e,t),a=t.width(),l.start(function(a,l,g,p){at(),a?(o=!1,i=p*c,a.row?n?s&&(t.width(f-10),W(t,d*Math.round((e.end?(e.end-e.start)/At:m("defaultEventMinutes"))/v)),t.draggable("option","grid",[f,1]),s=!1):o=!0:(rt(u(h(e.start),i),u(x(e),i)),r()),o=o||s&&!i):(r(),o=!0),t.draggable("option","revert",o)},g,"drag")},stop:function(n,a){if(l.stop(),at(),D("eventDragStop",t,e,n,a),o)r(),t.css("filter",""),G(e,t);else{var c=0;s||(c=Math.round((t.offset().top-$().offset().top)/d)*v+g-(60*e.start.getHours()+e.start.getMinutes())),tt(this,e,i,c,s,n,a)}}})}function g(e,t,n){function r(t){var r,a=d(h(e.start),t);e.end&&(r=d(h(e.end),t)),n.text(st(a,r,m("timeFormat")))}function a(){l&&(n.css("display",""),t.draggable("option","grid",[p,y]),l=!1)}var o,i,s,c,l=!1,f=m("isRTL")?-1:1,v=A(),g=Y(),p=V(),y=J(),w=X();t.draggable({zIndex:9,scroll:!1,grid:[p,y],axis:1==g?"y":!1,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(r,d){D("eventDragStart",t,e,r,d),et(e,t),o=t.position(),s=c=0,v.start(function(r,o,s,c){t.draggable("option","revert",!r),at(),r&&(i=c*f,m("allDaySlot")&&!r.row?(l||(l=!0,n.hide(),t.draggable("option","grid",null)),rt(u(h(e.start),i),u(x(e),i))):a())},r,"drag")},drag:function(e,t){s=Math.round((t.position.top-o.top)/y)*w,s!=c&&(l||r(s),c=s)},stop:function(n,c){var u=v.stop();at(),D("eventDragStop",t,e,n,c),u&&(i||s||l)?tt(this,e,i,l?0:s,l,n,c):(a(),t.css("filter",""),t.css(o),r(0),G(e,t))}})}function p(e,t,n){var r,a,o=J(),i=X();t.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,et(e,t),t.css("z-index",9),D("eventResizeStart",this,e,n,o)},resize:function(s,c){r=Math.round((Math.max(o,t.height())-c.originalSize.height)/o),r!=a&&(n.text(st(e.start,r||e.end?d(M(e),i*r):null,m("timeFormat"))),a=r)},stop:function(n,a){D("eventResizeStop",this,e,n,a),r?nt(this,e,0,i*r,n,a):(t.css("z-index",8),G(e,t))}})}var y=this;y.renderEvents=n,y.compileDaySegs=a,y.clearEvents=r,y.slotSegHtml=c,y.bindDaySeg=l,Dt.call(y);var m=y.opt,D=y.trigger,w=y.isEventDraggable,b=y.isEventResizable,M=y.eventEnd,C=y.reportEvents,S=y.reportEventClear,k=y.eventElementHandlers,E=y.setHeight,T=y.getDaySegmentContainer,H=y.getSlotSegmentContainer,A=y.getHoverListener,L=y.getMaxMinute,O=y.getMinMinute,_=y.timePosition,q=y.colContentLeft,I=y.colContentRight,j=y.renderDaySegs,P=y.resizableDayEvent,Y=y.getColCnt,V=y.getColWidth,J=y.getSnapHeight,X=y.getSnapMinutes,$=y.getBodyContent,Q=y.reportEventElement,G=y.showEvents,et=y.hideEvents,tt=y.eventDrop,nt=y.eventResize,rt=y.renderDayOverlay,at=y.clearOverlays,ot=y.calendar,it=ot.formatDate,st=ot.formatDates}function ft(e){var t,n,r,a,o,i;for(t=e.length-1;t>0;t--)for(a=e[t],n=0;a.length>n;n++)for(o=a[n],r=0;e[t-1].length>r;r++)i=e[t-1][r],T(o,i)&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function dt(e,t){function n(e,t){if(100===t||-100===t)var n=c(e,t>0?1:-1),l=c(h(n),1);else if(t)if("month"===a("paginateResourceMonth")){var n=c(e,1*t);n.setDate(1);var l=c(h(n),1)}else var n=u(e,t*a("paginateResourceMonth")),l=c(h(n),1);else var n=h(e.setDate(1),!0),l=c(h(n.setDate(1),!0),1);var f=h(n),d=h(l),v=a("weekends");v||(p(f),p(d,-1,!0)),r.title=i(f,u(h(d),-1),a("titleFormat")),r.start=n,r.end=l,r.visStart=f,r.visEnd=d;var g,y=Math.round((d-f)/Wt);if(!v){for(var m=0,D=1;y>=D;D++)g=u(h(f),D-1),(0==g.getDay()||6==g.getDay())&&m++;y-=m}o(s.length,s.length,y,!1)}var r=this;r.render=n,pt.call(r,e,t,"resourceMonth");var a=r.opt,o=r.renderBasic,i=t.formatDates,s=r.getResources}function vt(e,t){function n(e,t){if(100===t||-100===t)var n=u(e,t>0?7:-7,!1),c=u(h(n),7);else if(t)var n=u(e,t*a("paginateResourceWeek"),!1),c=u(h(n),7);else var n=u(h(e,!0),-((e.getDay()-a("firstDay")+7)%7)),c=u(h(n),7);var l=h(n),f=h(c),d=a("weekends");d||(p(l),p(f,-1,!0)),r.title=i(l,u(h(f),-1),a("titleFormat")),r.start=n,r.end=c,r.visStart=l,r.visEnd=f,o(s.length,s.length,d?7:5,!1)}var r=this;r.render=n,pt.call(r,e,t,"resourceWeek");var a=r.opt,o=r.renderBasic,i=t.formatDates,s=r.getResources}function ht(e,t){function n(e,t){var n=a("weekends"),c=n?7:5;if(100===t||-100===t)var f=u(e,a("numberOfWeeks")*(t>0?7:-7),!1),d=u(h(f),7*a("numberOfWeeks"));else if(t)var f=u(e,t*a("paginateResourceNextWeeks"),!1),d=u(h(f),7*a("numberOfWeeks"));else var f=u(h(e),-((e.getDay()-a("firstDay")+c)%c),!1),d=l(h(f),a("numberOfWeeks"));var v=h(f),g=h(d);n||(p(v),p(g,-1,!0)),r.title=i(v,u(h(g),-1),a("titleFormat")),r.start=f,r.end=d,r.visStart=v,r.visEnd=g,o(s.length,s.length,n?7*a("numberOfWeeks"):5*a("numberOfWeeks"),!1)}var r=this;r.render=n,pt.call(r,e,t,"resourceNextWeeks");var a=r.opt,o=r.renderBasic,i=t.formatDates,s=r.getResources}function gt(e,t){function n(e,t){t&&(u(e,1*t),a("weekends")||p(e,0>t?-1:1));var n=d(h(e,!0),b(a("minTime"))),c=d(h(n),b(a("maxTime"))-b(a("minTime"))),l=h(n),f=h(c);r.title=i(l,u(h(f),-1),a("titleFormat")),r.start=n,r.end=c,r.visStart=l,r.visEnd=f;var v=Math.round((f-l)/1e3/60/a("slotMinutes"));o(s.length,s.length,v,!1)}var r=this;r.render=n,pt.call(r,e,t,"resourceDay");var a=r.opt,o=r.renderBasic,i=t.formatDates,s=r.getResources}function pt(n,r,a){function o(e,t,n,r){rt=t,at=n,i();var o=!X;o||"resourceMonth"==a?s(e,r):Dt(),c(o)}function i(){ct=gt("isRTL"),ct?(lt=-1,ut=at-1):(lt=1,ut=0),ft=gt("firstDay"),dt=gt("weekends")?0:1,vt=gt("theme")?"ui":"fc",ht=gt("columnFormat")}function s(t,r){var o,i,s,c,l,u,f=vt+"-widget-header",d=vt+"-widget-content",v=P.getResources;for(o="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr class='fc-first fc-last'><th class='fc-resourceName'>&nbsp;</th>",i=0;at>i;i++)o+="<th class='fc- "+f+"'/>";for(o+="</tr></thead><tbody>",i=0;t>i;i++){for(c=v[i].id,l=v[i].name,o+="<tr class='fc-resourcerow-"+c+"'><td class='fc-resourceName'>"+l+"</td>",s=0;at>s;s++)o+="<td class='fc- "+d+" fc-day"+s+" fc-resource"+c+"'>"+"<div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";o+="</tr>"}o+="</tbody></table>",u=n.html(e(o)),V=u.find("thead"),J=V.find("th:not(th.fc-resourceName)"),X=u.find("tbody"),U=X.find("tr"),Z=X.find("td:not(td.fc-resourceName)"),Q=U.children().filter(":first-child"),G=U.eq(0).find("div.fc-day-content div"),X.find("td.fc-resourceName").each(function(e,t){pt("resourceRender",v[e],t,a)}),J.removeClass("fc-first fc-last").filter(":first").addClass("fc-first").end().filter(":last").addClass("fc-last"),Z.removeClass("fc-first fc-last"),U.each(function(){e(this).children("td:not(td.fc-resourceName):first").addClass("fc-first"),e(this).children("td:not(td.fc-resourceName):last").addClass("fc-last")}),U.eq(0).addClass("fc-first"),g(Z),K=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(n)}function c(){P.start.getMonth();var t,n,r,o=v(new Date),i=0;gt("weekends"),J.each(function(r,o){t=e(o),n=F(r),t.html(Et(n,ht)),(0==n.getDay()||6==n.getDay())&&t.addClass("fc-weekend"),1==n.getDay()&&"resourceNextWeeks"==a&&t.html(t.html()+"<br>"+gt("weekPrefix")+" "+S(n)),t.each(function(e,t){t.className=t.className.replace(/^fc-\w*/,"fc-id"+n.getTime())})}),i=0,Z.each(function(r,a){t=e(a),n=F(r),+n==+o?t.addClass(vt+"-state-highlight fc-today"):t.removeClass(vt+"-state-highlight fc-today"),(0==n.getDay()||6==n.getDay())&&t.addClass("fc-weekend-column"),t.find("div.fc-day-number").text(n.getDate()),t.each(function(e,t){t.className=t.className.replace(/^fc-\w*/,"fc-id"+n.getTime())})}),U.each(function(t,n){r=e(n),rt>t?(r.show(),t==rt-1?r.addClass("fc-last"):r.removeClass("fc-last")):r.hide()})}function l(t){tt=t;var n,r,a,o=tt-V.height();"variable"==gt("weekMode")?n=r=Math.floor(o/(1==rt?2:6)):(n=Math.floor(o/rt),r=o-n*(rt-1)),Q.each(function(t,o){rt>t&&(a=e(o),j(a.find("> div"),(t==rt-1?r:n)-B(a)))})}function f(t){et=t,et-=e("th.fc-resourceName").css("width").replace("px",""),st.clear(),nt=Math.floor(et/at),H(J.slice(0,-1),nt)}function g(e){e.click(p).mousedown(I)}function p(e){if(!gt("selectable")){var t=parseInt(this.className.match(/fc\-day(\d+)/)[1]),n=F(t);pt("dayClick",this,n,!0,e)}}function m(e,t,n,r){n&&ot.build();var o=h(P.visStart),i=u(h(o),at);"resourceDay"==a?i=d(h(o),gt("slotMinutes")*at):gt("weekends")||(i=h(P.visEnd));var s=new Date(Math.max(o,e)),c=new Date(Math.min(i,t));if(c>s){var l,f;if("resourceDay"==a)l=(s-o)/1e3/60/gt("slotMinutes"),f=(c-o)/1e3/60/gt("slotMinutes");else if(ct?(l=y(c,o)*lt+ut+1,f=y(s,o)*lt+ut+1):(l=y(s,o),f=y(c,o)),!gt("weekends")){for(var v,p=0,m=0;l>=m;m++)v=u(h(P.visStart),m),(0==v.getDay()||6==v.getDay())&&p++;l-=p;var w=0;for(m=0;f-1>=m;m++)v=u(h(P.visStart),m),(0==v.getDay()||6==v.getDay())&&w++;f-=w}g(D(r,l,r,f-1))}}function D(e,t,r,a){var o=ot.rect(e,Math.round(t),r,Math.round(a),n);return St(o,n)}function w(e){return h(e)}function b(e,t,n,r){"resourceDay"==a?m(e,d(h(t),gt("slotMinutes")),!0,r):m(e,u(h(t),1),!0,r)}function M(){kt()}function C(e,t,n,r){var a=N(e),o=Z[a.col];pt("dayClick",o,e,t,n,r)}function x(e,t){it.start(function(e){kt(),e&&D(e.row,e.col,e.row,e.col)},t)}function k(e,t,n){var r=it.stop();if(kt(),r){var a=P.getResources,o=a[r.row],i=z(r);pt("drop",e,i,!0,t,n,o)}}function E(e){return h(e.start)}function T(e){return st.left(e)}function R(e){return st.right(e)}function N(e){var t;return gt("weekends"),t="resourceDay"==a?L(e):Math.round((h(e,!0)-P.visStart)/1e3/60/60/24),{col:t}}function z(e){return W(e.col)}function W(e){if("resourceDay"==a)return d(h(P.visStart),e*gt("slotMinutes"));if(!gt("weekends")){var t,n;for(n=0;e>=n;n++)t=u(h(P.visStart),n),(6==t.getDay()||0==t.getDay())&&e++}return u(h(P.visStart),e,!0)}function F(e){return W(e%at)}function A(e){return(e-Math.max(ft,dt)+at)%at*lt+ut}function L(e){for(var t,n,r,a,o=e.getHours(),i=e.getMinutes(),s=gt("slotMinutes"),c=0;60/s>=c;c++)t=c*s,n=Math.abs(t-i),(r>=n||0==c)&&(r=n,a=t),60==a&&(o++,a=0);i=a;for(var c=0;at>c;c++)if(F(c).getHours()==o&&F(c).getMinutes()==i)return c;return at}function O(e){return U.eq(e)}function _(){var t=parseInt(e(V).find("th.fc-resourceName").css("width").replace("px",""));return{left:t,right:et+t}}function q(e,n,r,a,o){return"object"==typeof o&&o.readonly===!0?!1:(selected=!0,pt("select",null,e,n,r,a,"",o),t)}function I(t){var n,r,o=P.cellDate,i=P.cellIsAllDay,s=P.getHoverListener(),c=P.unselect,l=P.reportDayClick,u=P.getResources||[];if(1==t.which&&gt("selectable")){c(t);var f;s.start(function(e,t){M(),e&&(r="object"==typeof u[e.row]?u[e.row].readonly:!1),e&&i(e)&&r!==!0?(f=[o(t),o(e)].sort(Y),b(f[0],f[1],"resourceDay"==a?!1:!0,e.row),n=e.row):f=null},t),e(document).one("mouseup",function(e){s.stop(),f&&(+f[0]==+f[1]&&l(f[0],"resourceDay"==a?!1:!0,e,u[n]),q(f[0],"resourceDay"==a?d(f[1],gt("slotMinutes")):f[1],"resourceDay"==a?!1:!0,e,u[n]))})}}var P=this;P.renderBasic=o,P.setHeight=l,P.setWidth=f,P.renderDayOverlay=m,P.defaultSelectionEnd=w,P.renderSelection=b,P.clearSelection=M,P.reportDayClick=C,P.dragStart=x,P.dragStop=k,P.defaultEventEnd=E,P.getHoverListener=function(){return it},P.colContentLeft=T,P.colContentRight=R,P.dayOfWeekCol=A,P.timeOfDayCol=L,P.dateCell=N,P.cellDate=z,P.cellIsAllDay=function(){return!0},P.allDayRow=O,P.allDayBounds=_,P.getRowCnt=function(){return rt},P.getColCnt=function(){return at},P.getResources=r.fetchResources(),P.getColWidth=function(){return nt},P.getViewName=function(){return a},P.getDaySegmentContainer=function(){return K},mt.call(P,n,r,a),bt.call(P),wt.call(P),yt.call(P);var V,J,X,U,Z,Q,G,K,et,tt,nt,rt,at,ot,it,st,ct,lt,ut,ft,dt,vt,ht,gt=P.opt,pt=P.trigger,Dt=P.clearEvents,St=P.renderOverlay,kt=P.clearOverlays,Et=r.formatDate;$(n.addClass("fc-grid")),ot=new Mt(function(t,n){var r,a,o;J.each(function(t,i){r=e(i),a=r.offset().left,t&&(o[1]=a),o=[a],n[t]=o}),o[1]=a+r.outerWidth(),U.each(function(n,i){rt>n&&(r=e(i),a=r.offset().top,n&&(o[1]=a),o=[a],t[n]=o)}),o[1]=a+r.outerHeight()}),it=new Ct(ot),st=new xt(function(e){return G.eq(e)})}function yt(){function n(e,t){p(e),z(a(e),t),f("eventAfterAllRender")}function r(){y(),M().empty()}function a(t){var n,r,a,o,i,s,f,v,g,p,y=E(),m=(T(),c.getResources),D=h(c.visStart),w=h(c.visEnd),b=N(),M=[],C=l("weekends");for(n="resourceDay"==b?e.map(t,function(e){return e.end||d(h(e.start),l("slotMinutes"))}):e.map(t,x),r=0;y>r;r++)for(s=m[r].id,a=R(t,n,D,w),o=0;a.length>o;o++)i=a[o],i.row=r,e.isArray(i.event.resource)||(i.event.resource=[i.event.resource]),f=i.event.start.getDay(),g=i.event.start.getDate(),null==i.event.end?(v=i.event.start.getDay(),p=h(i.event.start,!0).getDate()):(v=i.event.end.getDay(),p=i.event.end.getDate()),(C||6!=f&&0!=f||6!=v&&0!=v||g!=p&&u(h(i.event.start),1).getDate()!=p)&&"-1"!=e.inArray(s,i.event.resource)&&M.push(i);return M}function o(e,t,n){v(e)&&i(e,t),n.isEnd&&g(e)&&s(e,t,n),m(e,t)}function i(t,n){var r,a,o,i,s,v,g,p,y,m,M=C(),E=c.getResources,T=N(),R=!1;e(E).each(function(e,n){n.id==t.resource&&n.readonly&&(R=!0)}),n.draggable({zIndex:9,delay:50,disabled:R,opacity:l("dragOpacity"),revertDuration:l("dragRevertDuration"),start:function(e,c){f("eventDragStart",n,t,e,c),w(t,n),M.start(function(e,c,f,v){if(n.draggable("option","revert",!e||!f&&!v||E[e.row].readonly===!0),k(),e&&!E[e.row].readonly)if(o=f,i=E[e.row].id,"resourceDay"==T)a=v*(l("isRTL")?-1:1)*l("slotMinutes"),S(d(h(t.start),a),d(h(t.end),a),!1,e.row);else{if(r=p=y=v*(l("isRTL")?-1:1),!l("weekends")&&(r>0||0>r))if(r>0){for(m=1;p>=m;m++)s=u(h(t.start),m),(6==s.getDay()||0==s.getDay())&&p++;for(m=1;y>=m;m++)s=u(h(t.end),m),(6==s.getDay()||0==s.getDay())&&y++}else{for(m=-1;m>=p;m--)s=u(h(t.start),m),(6==s.getDay()||0==s.getDay())&&p--;for(m=-1;m>=y;m--)s=u(h(t.end),m),(6==s.getDay()||0==s.getDay())&&y--}S(u(h(t.start),p),u(x(t),y),!1,e.row)}else a=0,r=0,o=0},e,"drag")},stop:function(e,c){var d=M.stop();if(k(),f("eventDragStop",n,t,e,c),d||f("eventDropOutside",n,t,e,c),"resourceDay"==T&&(a||o))b(this,t,0,a,t.allDay,e,c,i);else if(r||o){if(!l("weekends"))if(r>0){for(v=0,m=1;r+v>=m;m++)s=u(h(t.start),m),(6==s.getDay()||0==s.getDay())&&v++;for(v>0&&(t.start=u(h(t.start),v,!0)),v=0,m=1;r+v>=m;m++)s=u(h(t.end),m),(6==s.getDay()||0==s.getDay())&&v++;v>0&&(t.end=u(h(t.end),v,!0))}else{for(g=0,m=-1;m>=r+g;m--)s=u(h(t.start),m),(6==s.getDay()||0==s.getDay())&&g--;for(0>g&&(t.start=u(h(t.start),g,!0)),g=0,m=-1;m>=r+g;m--)s=u(h(t.end),m),(6==s.getDay()||0==s.getDay())&&g--;0>g&&(t.end=u(h(t.end),g,!0))}b(this,t,r,0,t.allDay,e,c,i)}else n.css("filter",""),D(t,n)}})}function s(n,r,a){var o=l("isRTL"),i=o?"w":"e",s=r.find("div.ui-resizable-"+i),v=!1,g=!1;return e(c.getResources).each(function(e,t){t.id==n.resource&&t.readonly&&(g=!0)}),g?!1:($(r),r.mousedown(function(e){e.preventDefault()}).click(function(e){v&&(e.preventDefault(),e.stopImmediatePropagation())}),s.mousedown(function(t){function s(t){if(f("eventResizeStop",this,n,t),e("body").css("cursor",""),g.stop(),k(),p){if(!l("weekends"))if(x=n.end||h(n.start),p>0){for(var r=0,a=1;p+r>=a;a++)C=u(h(x),a),(6==C.getDay()||0==C.getDay())&&r++;r>0&&(n.end=u(h(x),r,!0))}else{var o=0;for(a=-1;a>=p+o;a--)C=u(h(x),a),(6==C.getDay()||0==C.getDay())&&o--;0>o&&(n.end=u(h(x),o,!0))}O(this,n,p,0,t)}else b&&O(this,n,0,b,t);setTimeout(function(){v=!1},0)}if(1==t.which){v=!0;var g=c.getHoverListener();E();var p,y,m,b,M,C,x,R=T(),z=N(),B=o?-1:1,_=o?R-1:0,q=r.css("top"),I=e.extend({},n),j=H(n.start);W(),e("body").css("cursor",i+"-resize").one("mouseup",s),f("eventResizeStart",this,n,t),g.start(function(e,t){if(e){Math.max(j.row,e.row);var r=e.col;if("resourceDay"==z){b=l("slotMinutes")*r*B+_-(l("slotMinutes")*t.col*B+_);var o=d(F(n),b,!0)}else{if(p=y=m=7+r*B+_-(7+t.col*B+_),x=n.end||h(n.start),!l("weekends")&&(p>0||0>p))if(p>0)for(var s=1;m>=s;s++)C=u(h(x),s),(6==C.getDay()||0==C.getDay())&&m++;else for(s=-1;s>=m;s--)C=u(h(x),s),(6==C.getDay()||0==C.getDay())&&m--;o=u(F(n),m,!0)}if(p||b){I.end=o;var c=M;M=A(L([I]),a.row,q),M.find("*").css("cursor",i+"-resize"),c&&c.remove(),w(n)}else M&&(D(n),M.remove(),M=null);k(),"resourceDay"==z?S(n.start,d(h(o),0),1,t.row):S(n.start,u(h(o),1),1,t.row)}},t)}}),t)}var c=this;c.renderEvents=n,c.compileDaySegs=a,c.clearEvents=r,c.bindDaySeg=o,c.resizableResourceEvent=s,Dt.call(c);var l=c.opt,f=c.trigger,v=c.isEventDraggable,g=c.isEventResizable,p=c.reportEvents,y=c.reportEventClear,m=c.eventElementHandlers,D=c.showEvents,w=c.hideEvents,b=c.eventDrop,M=c.getDaySegmentContainer,C=c.getHoverListener,S=c.renderDayOverlay,k=c.clearOverlays,E=c.getRowCnt,T=c.getColCnt,N=c.getViewName,z=c.renderDaySegs,H=c.dateCell,W=c.clearSelection,F=c.eventEnd,A=c.renderTempDaySegs,L=c.compileDaySegs,O=c.eventResize}function mt(e,n,r){function a(){evs=[];for(id in z)evs.push(R[id]);return evs}function o(e,t){var n=H[e];return"object"==typeof n?X(n,t||r):n}function i(e,t){return n.trigger.apply(n,[e,t||x].concat(Array.prototype.slice.call(arguments,2),[x]))}function s(e){return l(e)&&!o("disableDragging")}function c(e){return l(e)&&!o("disableResizing")}function l(e){return tt(e.editable,(e.source||{}).editable,o("editable"))}function f(e){R={};var t,n,r=e.length;for(t=0;r>t;t++)n=e[t],R[n._id]?R[n._id].push(n):R[n._id]=[n]}function v(e){return e.end?h(e.end):k(e)}function g(e,t){N.push(t),z[e._id]?z[e._id].push(t):z[e._id]=[t]}function p(){N=[],z={}}function y(e,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?t:i("eventClick",this,e,r)}).hover(function(t){i("eventMouseover",this,e,t)},function(t){i("eventMouseout",this,e,t)})}function m(e,t){w(e,t,"show")}function D(e,t){w(e,t,"hide")}function w(e,t,n){var r,a=z[e._id],o=a.length;for(r=0;o>r;r++)t&&a[r][0]==t[0]||a[r][n]()}function b(e,t,n,r,a,o,s,c){var l=t.allDay,u=t._id,f=t.resource||"";C(R[u],n,r,a,c),i("eventDrop",e,t,n,r,a,function(){C(R[u],-n,-r,l,f),T(u)},o,s,c),T(u)}function M(e,t,n,r,a,o){var s=t._id;S(R[s],n,r),i("eventResize",e,t,n,r,function(){S(R[s],-n,-r),T(s)},a,o),T(s)}function C(e,n,r,a,o){r=r||0;for(var i,s=e.length,c=0;s>c;c++)i=e[c],a!==t&&(i.allDay=a),d(u(i.start,n,!0),r),i.end&&(i.end=d(u(i.end,n,!0),r)),i.resource!=o&&1==s&&(i.resource=o),E(i,H)}function S(e,t,n){n=n||0;for(var r,a=e.length,o=0;a>o;o++)r=e[o],r.end=d(u(v(r),t,!0),n),E(r,H)}var x=this;x.element=e,x.calendar=n,x.name=r,x.opt=o,x.trigger=i,x.isEventDraggable=s,x.isEventResizable=c,x.reportEvents=f,x.eventEnd=v,x.reportEventElement=g,x.reportEventClear=p,x.eventElementHandlers=y,x.showEvents=m,x.hideEvents=D,x.eventDrop=b,x.eventResize=M,x.getShownEvents=a;var k=x.defaultEventEnd,E=n.normalizeEvent,T=n.reportEventChange,R={},N=[],z={},H=n.options}function Dt(){function n(e,t){var n,r,u,h,p,y,m,D,w=_(),b=E(),M=T(),C=0,S=e.length;for(w[0].innerHTML=a(e),o(e,w.children()),i(e),s(e,w,t),c(e),l(e),f(e),n=d(),r=0;b>r;r++){for(u=0,h=[],p=0;M>p;p++)h[p]=0;for(;S>C&&(y=e[C]).row==r;){for(m=V(h.slice(y.startCol,y.endCol)),y.top=m,m+=y.outerHeight,D=y.startCol;y.endCol>D;D++)h[D]=m;C++}n[r].height(V(h))}g(e,v(n))}function r(t,n,r){var i,s,u,h=e("<div/>"),p=_(),y=t.length;for(h[0].innerHTML=a(t),i=h.children(),p.append(i),o(t,i),c(t),l(t),f(t),g(t,v(d())),i=[],s=0;y>s;s++)u=t[s].element,u&&(t[s].row===n&&u.css("top",r),i.push(u[0]));return e(i)}function a(e){var t,n,r,a,o,i,s,c,l,f,d=m("isRTL"),v=e.length,g=N(),p=g.left,y=g.right,D="",M=X(),C=m("weekends");for(t=0;v>t;t++)n=e[t],r=n.event,o=["fc-event","fc-event-hori"],w(r)&&o.push("fc-event-draggable"),n.isStart&&o.push("fc-event-start"),n.isEnd&&o.push("fc-event-end"),d?(i=A(n.end.getDay()-1),s=A(n.start.getDay()),c=n.isEnd?H(i):p,l=n.isStart?W(s):y):(i=A(n.start.getDay()),s=A(n.end.getDay()-1),c=n.isStart?H(i):p,l=n.isEnd?W(s):y),"resourceMonth"==M||"resourceNextWeeks"==M||"resourceWeek"==M?(i=O(n.start).col,s=O(n.end).col-1,C||(i=O(n.start).col,s=O(u(h(n.end),-1)).col,(6==n.start.getDay()||0==n.start.getDay())&&i++)):"resourceDay"==M&&(i=L(n.start),s=L(n.end)-1,(n.end-n.start)/1e3/60<m("slotMinutes")&&i--),d?(c=n.isEnd?H(i):p,l=n.isStart?W(s):y):(c=n.isStart?H(i):p,l=n.isEnd?W(s):y),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[])),a=r.url,f=K(r,m),D+=a?"<a href='"+U(a)+"'":"<div",D+=" class='"+o.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+c+"px;"+f+"'"+">"+"<div class='fc-event-inner'"+(f?" style='"+f+"'":"")+">",!r.allDay&&n.isStart&&(D+="<span class='fc-event-time'>"+U(j(r.start,r.end,m("timeFormat")))+"</span>"),D+="<span class='fc-event-title' "+(f?" style='"+f+"'":"")+">"+U(r.title)+"</span>"+"</div>",n.isEnd&&b(r)&&(D+="<div class='ui-resizable-handle ui-resizable-"+(d?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),D+="</"+(a?"a":"div")+">",n.left=c,n.outerWidth=l-c,n.startCol=i,n.endCol=s+1;return D}function o(t,n){var r,a,o,i,s,c=t.length;for(r=0;c>r;r++)a=t[r],o=a.event,i=e(n[r]),s=D("eventRender",o,o,i),s===!1?i.remove():(s&&s!==!0&&(s=e(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}function i(e){var t,n,r,a=e.length;for(t=0;a>t;t++)n=e[t],r=n.element,r&&C(n.event,r)}function s(e,t,n){var r,a,o,i,s=e.length;for(r=0;s>r;r++)a=e[r],o=a.element,o&&(i=a.event,i._id===n?I(i,o,a):o[0]._fci=r);z(t,e,I)}function c(e){var n,r,a,o,i,s=e.length,c={};for(n=0;s>n;n++)r=e[n],a=r.element,a&&(o=r.key=Z(a[0]),i=c[o],i===t&&(i=c[o]=F(a,!0)),r.hsides=i)}function l(e){var t,n,r,a=e.length;for(t=0;a>t;t++)n=e[t],r=n.element,r&&(r[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function f(e){var n,r,a,o,i,s=e.length,c={};for(n=0;s>n;n++)r=e[n],a=r.element,a&&(o=r.key,i=c[o],i===t&&(i=c[o]=q(a)),r.outerHeight=a[0].offsetHeight+i)}function d(){var e,t=E(),n=[];for(e=0;t>e;e++)n[e]=R(e).find("td:not(.fc-resourceName):first div.fc-day-content > div");return n}function v(e){var t,n=e.length,r=[];for(t=0;n>t;t++)r[t]=e[t][0].offsetTop;return r}function g(e,t){var n,r,a,o,i=e.length;for(n=0;i>n;n++)r=e[n],a=r.element,a&&(a[0].style.top=t[r.row]+(r.top||0)+"px",o=r.event,D("eventAfterRender",o,o,a))}function p(t,n,a){var o=m("isRTL"),i=o?"w":"e",s=n.find(".ui-resizable-"+i),c=!1;$(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),s.mousedown(function(s){function l(n){D("eventResizeStop",this,t,n),e("body").css("cursor",""),v.stop(),Y(),f&&k(this,t,f,0,n),setTimeout(function(){c=!1},0)}if(1==s.which){c=!0;var f,d,v=y.getHoverListener(),g=E(),p=T(),m=o?-1:1,w=o?p-1:0,b=n.css("top"),C=e.extend({},t),R=O(t.start);J(),e("body").css("cursor",i+"-resize").one("mouseup",l),D("eventResizeStart",this,t,s),v.start(function(e,n){if(e){var s=Math.max(R.row,e.row),c=e.col;1==g&&(s=0),s==R.row&&(c=o?Math.min(R.col,c):Math.max(R.col,c)),f=7*s+c*m+w-(7*n.row+n.col*m+w);var l=u(M(t),f,!0);if(f){C.end=l;var v=d;d=r(B([C]),a.row,b),d.find("*").css("cursor",i+"-resize"),v&&v.remove(),x(t)}else d&&(S(t),d.remove(),d=null);Y(),P(t.start,u(h(l),1))}},s)}})}var y=this;y.renderDaySegs=n,y.renderTempDaySegs=r,y.resizableDayEvent=p;var m=y.opt,D=y.trigger,w=y.isEventDraggable,b=y.isEventResizable,M=y.eventEnd,C=y.reportEventElement,S=y.showEvents,x=y.hideEvents,k=y.eventResize,E=y.getRowCnt,T=y.getColCnt;y.getColWidth;var R=y.allDayRow,N=y.allDayBounds,H=y.colContentLeft,W=y.colContentRight,A=y.dayOfWeekCol,L=y.timeOfDayCol,O=y.dateCell,B=y.compileDaySegs,_=y.getDaySegmentContainer,I=y.bindDaySeg,j=y.calendar.formatDates,P=y.renderDayOverlay,Y=y.clearOverlays,J=y.clearSelection,X=y.getViewName}function wt(){function t(e,t,a){n(),t||(t=c(e,a)),l(e,t,a),r(e,t,a)}function n(e){f&&(f=!1,u(),s("unselect",null,e))}function r(e,t,n,r){f=!0,s("select",null,e,t,n,r)}function a(t){var a=o.cellDate,s=o.cellIsAllDay,c=o.getHoverListener(),f=o.reportDayClick;if(1==t.which&&i("selectable")){n(t);var d;c.start(function(e,t){u(),e&&s(e)?(d=[a(t),a(e)].sort(Y),l(d[0],d[1],!0)):d=null},t),e(document).one("mouseup",function(e){c.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,e),r(d[0],d[1],!0,e))})}}var o=this;o.select=t,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,c=o.defaultSelectionEnd,l=o.renderSelection,u=o.clearSelection,f=!1;i("selectable")&&i("unselectAuto")&&e(document).mousedown(function(t){var r=i("unselectCancel");r&&e(t.target).parents(r).length||n(t)})}function bt(){function t(t,n){var r=o.shift();return r||(r=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(t).show()),r}function n(){for(var e;e=a.shift();)o.push(e.hide().unbind())}var r=this;r.renderOverlay=t,r.clearOverlays=n;var a=[],o=[]}function Mt(e){var t,n,r=this;r.build=function(){t=[],n=[],e(t,n)},r.cell=function(e,r){var a,o=t.length,i=n.length,s=-1,c=-1;for(a=0;o>a;a++)if(r>=t[a][0]&&t[a][1]>r){s=a;break}for(a=0;i>a;a++)if(e>=n[a][0]&&n[a][1]>e){c=a;break}return s>=0&&c>=0?{row:s,col:c}:null},r.rect=function(e,r,a,o,i){var s=i.offset();return{top:t[e][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:t[a][1]-t[e][0]}}}function Ct(t){function n(e){St(e);var n=t.cell(e.pageX,e.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,c,l){a=s,o=i=null,t.build(),n(c),r=l||"mousemove",e(document).bind(r,n)},s.stop=function(){return e(document).unbind(r,n),i}}function St(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function xt(e){function n(t){return a[t]=a[t]||e(t)}var r=this,a={},o={},i={};r.left=function(e){return o[e]=o[e]===t?n(e).position().left:o[e]},r.right=function(e){return i[e]=i[e]===t?r.left(e)+n(e).width():i[e]},r.clear=function(){a={},o={},i={}}}var kt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",refetchResources:!1,titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy",resourceMonth:"MMMM yyyy",resourceWeek:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",resourceNextWeeks:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",resourceDay:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d",resourceDay:"H:mm",resourceMonth:"M/d",resourceWeek:"ddd M/d",resourceNextWeeks:"ddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",largePrev:"<span class='fc-text-arrow'>&laquo;</span>",largeNext:"<span class='fc-text-arrow'>&raquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day",resourceDay:"resource day",resourceWeek:"resource week",resourceNextWeeks:"resource next weeks",resourceMonth:"resource month"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",numberOfWeeks:4,weekPrefix:"Week",paginateResourceWeek:7,paginateResourceNextWeeks:7,paginateResourceMonth:"month"},Et={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Tt=e.fullCalendar={version:"1.6.1.5"},Rt=Tt.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e.data(this,"fullCalendar");if(r&&e.isFunction(r[n])){var i=r[n].apply(r,o);a===t&&(a=i),"destroy"==n&&e.removeData(this,"fullCalendar")}}),a!==t?a:this}var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=e.extend(!0,{},kt,n.isRTL||n.isRTL===t&&kt.isRTL?Et:{},n),this.each(function(t,a){var o=e(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},Tt.sourceNormalizers=[],Tt.sourceFetchers=[];var Nt={dataType:"json",cache:!1},zt=1;Tt.addDays=u,Tt.cloneDate=h,Tt.parseDate=D,Tt.parseISO8601=w,Tt.parseTime=b,Tt.formatDate=M,Tt.formatDates=C;var Ht=["sun","mon","tue","wed","thu","fri","sat"],Wt=864e5,Ft=36e5,At=6e4,Lt={s:function(e){return e.getSeconds()
},ss:function(e){return J(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return J(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return J(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return J(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return J(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return J(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return M(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return S(e)}};Tt.dateFormatters=Lt,Tt.applyAll=et,Rt.month=nt,Rt.basicWeek=rt,Rt.basicDay=at,n({weekMode:"fixed"}),Rt.agendaWeek=st,Rt.agendaDay=ct,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24}),Rt.resourceMonth=dt,Rt.resourceWeek=vt,Rt.resourceNextWeeks=ht,Rt.resourceDay=gt,n({weekMode:"fixed"})})(jQuery);